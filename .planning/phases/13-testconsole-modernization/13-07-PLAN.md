# Plan 13-07: Documentation update (README.md and related docs)

---
wave: 3
depends_on:
  - 13-01-PLAN.md
  - 13-02-PLAN.md
  - 13-03-PLAN.md
  - 13-04-PLAN.md
  - 13-05-PLAN.md
  - 13-06-PLAN.md
files_modified:
  - README.md
  - CLAUDE.md
  - docs/TESTING.md (new)
  - docs/API-REFERENCE.md (new)
autonomous: true
---

## Objective

Update README.md and related documentation with complete v2.0 features including the Control API, real-time dashboard, Kafka integration, dynamic server management, alerts system, and E2E testing.

## Context

The current README.md documents v1.0 (Multi-NAS topology). v2.0 adds significant features:
- Control API with REST endpoints for all operations
- Real-time React dashboard with SignalR updates
- Kafka integration (topic management, produce/consume)
- Dynamic server creation (FTP, SFTP, NAS)
- Alerting system with configurable thresholds
- Historical metrics and charts
- E2E testing with Playwright
- Modernized TestConsole with API integration

## Tasks

<task id="1">
Update README.md header and overview.

Update the top section to reflect v2.0:

```markdown
# File Simulator Suite

A comprehensive file access simulator for Kubernetes development and testing...

## v2.0: Simulator Control Platform (Released: 2026-02-05)

**NEW:** The v2.0 release adds a complete **control platform** for managing and monitoring file simulators:

- **Real-time Dashboard**: React-based UI with live server status, file events, and metrics
- **Control API**: REST API for server management, file operations, and configuration
- **Dynamic Servers**: Create FTP, SFTP, and NAS servers on-demand via API
- **Kafka Integration**: Topic management, message produce/consume, consumer groups
- **Alerting System**: Configurable thresholds for disk, health, and Kafka metrics
- **Historical Metrics**: Time-series charts with 7-day retention and rollups
- **E2E Testing**: Playwright-based browser automation tests for dashboard

**Dashboard**: http://file-simulator.local:30080
**API**: http://file-simulator.local:30500/api

See [v1.0 Multi-NAS Features](#v10-multi-nas-production-topology) below for the original release notes.
```
</task>

<task id="2">
Add new Table of Contents entries.

Add sections for v2.0 features:
- [v2.0 Control Platform](#v20-simulator-control-platform-released-2026-02-05)
- [Dashboard](#dashboard)
- [Control API](#control-api)
- [Dynamic Server Management](#dynamic-server-management)
- [Kafka Integration](#kafka-integration)
- [Alerting System](#alerting-system)
- [Testing](#testing)
  - [TestConsole](#testconsole)
  - [E2E Tests](#e2e-tests)
</task>

<task id="3">
Add Dashboard section.

Add new section describing the React dashboard:

```markdown
## Dashboard

The File Simulator Suite includes a real-time dashboard for monitoring and managing simulators.

### Accessing the Dashboard

- **URL**: http://file-simulator.local:30080 (or http://<minikube-ip>:30080)
- **No authentication required** for the dashboard

### Dashboard Features

| Tab | Description |
|-----|-------------|
| Servers | Server grid with health status, create/delete dynamic servers |
| Files | File browser with tree view, upload, download, batch operations |
| Kafka | Topic management, message producer, message viewer |
| Alerts | Active alerts, alert history, notification settings |
| History | Time-series charts, latency graphs, server sparklines |

### Real-time Updates

The dashboard uses SignalR for real-time updates:
- Server health status changes
- File system events (create, modify, delete)
- Kafka message notifications
- Alert triggers

### Screenshots

[Add screenshots here if available]
```
</task>

<task id="4">
Add Control API section.

Add section documenting the REST API:

```markdown
## Control API

The Control API provides programmatic access to all simulator features.

### Base URL

- **Local**: http://localhost:5000
- **Kubernetes**: http://file-simulator.local:30500

### API Endpoints

| Endpoint | Method | Description |
|----------|--------|-------------|
| /api/health | GET | Health check |
| /api/connection-info | GET | Get all connection details |
| /api/servers | GET | List all servers |
| /api/servers | POST | Create dynamic server |
| /api/servers/{name} | DELETE | Delete dynamic server |
| /api/files | GET | List files in directory |
| /api/files/upload | POST | Upload file |
| /api/files | DELETE | Delete file |
| /api/kafka/topics | GET | List Kafka topics |
| /api/kafka/produce | POST | Produce message |
| /api/kafka/consume/{topic} | GET | Consume messages |
| /api/alerts | GET | List alerts |
| /api/metrics | GET | Get historical metrics |
| /api/configuration/export | GET | Export configuration |

### Connection Info API

Get all connection details for your applications:

\`\`\`powershell
# JSON format (default)
curl http://file-simulator.local:30500/api/connection-info

# Environment variables format
curl http://file-simulator.local:30500/api/connection-info?format=env

# .NET appsettings.json format
curl http://file-simulator.local:30500/api/connection-info?format=dotnet
\`\`\`
```
</task>

<task id="5">
Add Dynamic Server Management section.

```markdown
## Dynamic Server Management

Create temporary FTP, SFTP, or NAS servers on-demand for testing.

### Create Dynamic Server

\`\`\`powershell
# Create FTP server
curl -X POST http://file-simulator.local:30500/api/servers \
  -H "Content-Type: application/json" \
  -d '{"name": "my-ftp", "protocol": "FTP", "username": "user", "password": "pass"}'

# Create SFTP server
curl -X POST http://file-simulator.local:30500/api/servers \
  -H "Content-Type: application/json" \
  -d '{"name": "my-sftp", "protocol": "SFTP", "username": "user", "password": "pass"}'

# Create NAS server
curl -X POST http://file-simulator.local:30500/api/servers \
  -H "Content-Type: application/json" \
  -d '{"name": "my-nas", "protocol": "NAS", "directory": "input/custom"}'
\`\`\`

### Delete Dynamic Server

\`\`\`powershell
curl -X DELETE http://file-simulator.local:30500/api/servers/my-ftp
\`\`\`

Dynamic servers receive:
- Kubernetes Deployment and Service
- NodePort in 31000-31999 range
- Configurable credentials and directory
```
</task>

<task id="6">
Add Kafka Integration section.

```markdown
## Kafka Integration

The simulator includes a Kafka broker for event-driven testing.

### Kafka Access

- **Bootstrap Server**: file-simulator.local:30093
- **UI Console**: Available in dashboard Kafka tab

### Kafka API

\`\`\`powershell
# Create topic
curl -X POST http://file-simulator.local:30500/api/kafka/topics \
  -H "Content-Type: application/json" \
  -d '{"name": "my-topic", "partitions": 1}'

# Produce message
curl -X POST http://file-simulator.local:30500/api/kafka/produce \
  -H "Content-Type: application/json" \
  -d '{"topic": "my-topic", "key": "key1", "value": "hello world"}'

# Consume messages
curl http://file-simulator.local:30500/api/kafka/consume/my-topic?count=10
\`\`\`

### .NET Integration

\`\`\`csharp
var config = new ProducerConfig
{
    BootstrapServers = "file-simulator.local:30093"
};

using var producer = new ProducerBuilder<string, string>(config).Build();
await producer.ProduceAsync("my-topic", new Message<string, string>
{
    Key = "key1",
    Value = "hello world"
});
\`\`\`
```
</task>

<task id="7">
Add Alerting System section.

```markdown
## Alerting System

Monitor simulator health with configurable alerts.

### Alert Types

| Alert | Trigger | Default Threshold |
|-------|---------|-------------------|
| Disk Space | Low disk space | < 10% free |
| Server Health | Server down | Any server unhealthy |
| Kafka | Broker unavailable | Connection failure |

### Viewing Alerts

- **Dashboard**: Alerts tab shows active and historical alerts
- **API**: GET /api/alerts returns alert list
- **Banner**: Critical alerts show banner at top of dashboard

### Alert Lifecycle

1. Alert triggered when threshold exceeded
2. Alert appears in dashboard and API
3. Alert can be acknowledged (dismissed from banner)
4. Alert auto-resolves when condition clears
```
</task>

<task id="8">
Update Testing section.

Replace/update the Testing section:

```markdown
## Testing

### TestConsole

The TestConsole is a CLI application that tests all simulator protocols.

\`\`\`powershell
cd src/FileSimulator.TestConsole
dotnet run

# Test specific features
dotnet run -- --nas-only        # Only NAS servers
dotnet run -- --kafka           # Include Kafka tests
dotnet run -- --dynamic         # Test dynamic server creation
dotnet run -- --require-api     # Fail if Control API unavailable
\`\`\`

#### TestConsole Features (v2.0)

- **API-driven configuration**: Fetches settings from /api/connection-info
- **Multi-NAS testing**: Tests all 7 NAS servers with file operations
- **Dynamic server testing**: Creates/tests/deletes FTP, SFTP, NAS servers
- **Kafka testing**: Produce/consume message cycle validation

### E2E Tests

Browser-based tests using Playwright for dashboard validation.

\`\`\`powershell
# Install Playwright browsers (one-time)
.\scripts\Install-PlaywrightBrowsers.ps1

# Run E2E tests (requires simulator running)
cd tests/FileSimulator.E2ETests
$env:USE_EXISTING_SIMULATOR = "true"
dotnet test

# Run with headed browser for debugging
$env:PWDEBUG = "1"
dotnet test --filter "FullyQualifiedName~DashboardTests"
\`\`\`

### Multi-NAS Test Suite

See [v1.0 documentation](#v10-multi-nas-production-topology) for the comprehensive NAS validation tests.
```
</task>

<task id="9">
Create TESTING.md detailed testing guide.

Create file: docs/TESTING.md

Include:
- TestConsole command-line reference
- E2E test structure and patterns
- Running tests in CI
- Writing new tests
- Test fixtures and utilities
- Troubleshooting test failures
</task>

<task id="10">
Create API-REFERENCE.md.

Create file: docs/API-REFERENCE.md

Include:
- All API endpoints with request/response examples
- Authentication (none currently required)
- Error responses
- Rate limiting (if any)
- WebSocket/SignalR endpoints
</task>

<task id="11">
Update CLAUDE.md with v2.0 context.

Update CLAUDE.md to reflect v2.0 completion:
- Update project overview with v2.0 features
- Add Control API endpoints reference
- Add E2E testing patterns
- Update validation checklist with new items
</task>

<task id="12">
Update Project Structure in README.

Update the project structure tree to include new directories:

```
file-simulator-suite/
|-- src/
|   |-- FileSimulator.ControlApi/     # Control API (.NET 9)
|   |-- FileSimulator.TestConsole/    # CLI test tool
|   +-- dashboard/                     # React dashboard
|
|-- tests/
|   +-- FileSimulator.E2ETests/       # Playwright E2E tests
|
|-- docs/
|   |-- TESTING.md                    # Testing guide
|   +-- API-REFERENCE.md              # API documentation
|
|-- scripts/
|   |-- Start-Simulator.ps1           # Start local dev environment
|   |-- Install-PlaywrightBrowsers.ps1
...
```
</task>

## Verification

```powershell
# Verify README renders correctly
# Open README.md in VS Code or GitHub preview

# Verify docs exist
Test-Path docs/TESTING.md
Test-Path docs/API-REFERENCE.md

# Verify links work (no broken internal links)
# Manual check or use markdown-link-check tool

# Verify code examples work
# Test a few curl commands from the README against running simulator
```

## must_haves

These criteria must be TRUE for the plan to be considered complete:

1. README.md updated with v2.0 release header and features
2. Dashboard section documents all tabs and real-time features
3. Control API section documents all endpoints with examples
4. Dynamic server management documented with create/delete examples
5. Kafka integration documented with API and .NET examples
6. Alerting system documented with alert types and thresholds
7. Testing section documents TestConsole and E2E tests
8. docs/TESTING.md provides detailed testing guide
9. docs/API-REFERENCE.md provides complete API documentation
10. Project structure updated to include new directories
