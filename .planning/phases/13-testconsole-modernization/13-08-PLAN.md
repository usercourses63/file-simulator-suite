# Plan 13-08: GitHub release creation with changelog

---
wave: 3
depends_on:
  - 13-07-PLAN.md
files_modified:
  - CHANGELOG.md (new or update)
  - .github/release-drafter.yml (new, optional)
autonomous: true
---

## Objective

Create a GitHub tagged release (v2.0.0) with a comprehensive changelog documenting all v2.0 features, following conventional commits format and best practices for release documentation.

## Context

v2.0 represents a major milestone with the Simulator Control Platform. The release should:
- Tag the repository as v2.0.0
- Create a GitHub Release with full release notes
- Generate a CHANGELOG.md entry
- Follow semantic versioning

Key features in v2.0 (Phases 6-13):
- Phase 6: Backend API Foundation (REST API, SignalR hubs)
- Phase 7: Real-Time Monitoring Dashboard (React, server status)
- Phase 8: File Operations and Event Streaming
- Phase 9: Historical Metrics and Storage (SQLite, rollups)
- Phase 10: Kafka Integration (topics, produce/consume)
- Phase 11: Dynamic Server Management (create/delete FTP/SFTP/NAS)
- Phase 12: Alerting and Production Readiness
- Phase 13: TestConsole Modernization and E2E Testing

## Tasks

<task id="1">
Create or update CHANGELOG.md.

Create/update file: CHANGELOG.md

Use Keep a Changelog format (https://keepachangelog.com):

```markdown
# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [2.0.0] - 2026-02-05

### Added

#### Control API
- REST API for all simulator operations (/api/*)
- Connection info endpoint with multiple formats (JSON, env, YAML, .NET)
- Health check endpoints for all services
- Configuration export and import

#### Dashboard
- Real-time React dashboard with SignalR integration
- Server status grid with health indicators
- File browser with tree view and batch operations
- Kafka topic management and message viewer
- Alerts tab with active and historical alerts
- History tab with time-series charts

#### Dynamic Server Management
- Create FTP servers on-demand via API
- Create SFTP servers on-demand via API
- Create NAS servers on-demand via API
- Automatic Kubernetes deployment provisioning
- NodePort allocation in 31000-31999 range

#### Kafka Integration
- Kafka broker accessible at NodePort 30093
- Topic create/list/delete via API
- Message produce via API
- Message consume via API
- Consumer group monitoring

#### Alerting System
- Disk space monitoring with configurable thresholds
- Server health alerts
- Kafka broker connectivity alerts
- Alert banner for critical issues
- Alert history with SQLite persistence

#### Metrics and History
- Historical metrics collection (5-minute samples)
- Hourly rollup aggregation
- 7-day data retention with automatic cleanup
- Latency charts and server sparklines

#### Testing
- TestConsole API-driven configuration
- Multi-NAS server testing (7 servers)
- Dynamic server lifecycle testing
- Kafka integration tests
- Playwright E2E test suite for dashboard
- Start-Simulator.ps1 for local development

### Changed
- TestConsole now fetches configuration from Control API
- Improved error handling with structured validation errors
- Enhanced logging with structured logging

### Fixed
- Kafka exception handling for external listeners
- Dashboard validation error display with field names
- Dynamic NAS server configuration export

## [1.0.0] - 2026-02-01

### Added
- Multi-NAS topology with 7 servers (input-1/2/3, backup, output-1/2/3)
- Bidirectional Windows sync (init container + sidecar)
- Static PV/PVC provisioning with label selectors
- Comprehensive test suite (57 tests)
- NAS Integration Guide documentation

[See v1.0 release notes for full details]
```
</task>

<task id="2">
Prepare release commit.

Before creating the release:

1. Ensure all code changes are committed
2. Update version numbers if present in:
   - Directory.Build.props (if exists)
   - package.json in dashboard
   - Any version constants
3. Commit CHANGELOG.md update:
   ```
   git add CHANGELOG.md
   git commit -m "docs: update CHANGELOG for v2.0.0 release"
   ```
</task>

<task id="3">
Create Git tag.

```powershell
# Create annotated tag
git tag -a v2.0.0 -m "v2.0.0: Simulator Control Platform

Major release adding the Simulator Control Platform:

- Control API with REST endpoints
- Real-time React dashboard with SignalR
- Dynamic FTP/SFTP/NAS server management
- Kafka integration (topics, produce/consume)
- Alerting system with configurable thresholds
- Historical metrics with 7-day retention
- Modernized TestConsole with API integration
- Playwright E2E test suite

See CHANGELOG.md for full details."

# Push tag to remote
git push origin v2.0.0
```
</task>

<task id="4">
Create GitHub Release using gh CLI.

```powershell
gh release create v2.0.0 \
  --title "v2.0.0: Simulator Control Platform" \
  --notes-file release-notes.md \
  --latest

# Where release-notes.md contains:
```

Create release-notes.md (temporary file for release creation):

```markdown
# File Simulator Suite v2.0.0

The v2.0 release introduces the **Simulator Control Platform** - a comprehensive management layer for file simulators with real-time monitoring, dynamic server provisioning, and integrated testing.

## Highlights

### Real-time Dashboard
- Live server health monitoring
- File browser with drag-and-drop upload
- Kafka message viewer and producer
- Alert notifications with history

### Control API
- Full REST API for all operations
- Configuration export in multiple formats
- Dynamic server lifecycle management
- Kafka topic and message operations

### Dynamic Servers
- Create FTP, SFTP, NAS servers on-demand
- Automatic Kubernetes provisioning
- Configurable credentials and directories

### Kafka Integration
- Kafka broker at NodePort 30093
- Topic management via API
- Message produce/consume endpoints
- Consumer group monitoring

### Alerting
- Disk space alerts
- Server health monitoring
- Kafka connectivity checks
- Configurable thresholds

### Testing Improvements
- TestConsole fetches config from API
- Tests all 7 multi-NAS servers
- Dynamic server lifecycle tests
- Kafka produce/consume tests
- Playwright E2E test suite

## Breaking Changes

None. v2.0 is fully backward compatible with v1.0.

## Upgrade Guide

1. Pull latest changes
2. Rebuild Helm chart: `helm upgrade --install file-sim ./helm-chart/file-simulator --kube-context=file-simulator -n file-simulator`
3. Access dashboard at http://file-simulator.local:30080

## Full Changelog

See [CHANGELOG.md](CHANGELOG.md) for complete list of changes.

## Documentation

- [README.md](README.md) - Getting started guide
- [docs/TESTING.md](docs/TESTING.md) - Testing guide
- [docs/API-REFERENCE.md](docs/API-REFERENCE.md) - API documentation

## Contributors

Thank you to all contributors who made this release possible!
```
</task>

<task id="5">
Verify release on GitHub.

After creating release:
1. Verify tag appears on GitHub
2. Verify release notes render correctly
3. Verify CHANGELOG.md link works
4. Verify release is marked as "Latest"
</task>

<task id="6">
Create release announcement commit.

After release is created:

```powershell
# Update README.md with release badge if not present
# Add to top of README:
# [![GitHub release](https://img.shields.io/github/v/release/user/file-simulator-suite)](https://github.com/user/file-simulator-suite/releases)

git add README.md
git commit -m "docs: add release badge for v2.0.0"
git push origin master
```
</task>

<task id="7">
Clean up temporary files.

```powershell
# Remove temporary release notes file
Remove-Item release-notes.md

# Verify no temporary files committed
git status
```
</task>

<task id="8">
Optional: Set up release-drafter for future releases.

Create file: .github/release-drafter.yml (optional, for automated future releases)

```yaml
name-template: 'v$RESOLVED_VERSION'
tag-template: 'v$RESOLVED_VERSION'
categories:
  - title: 'Features'
    labels:
      - 'feature'
      - 'enhancement'
  - title: 'Bug Fixes'
    labels:
      - 'fix'
      - 'bugfix'
      - 'bug'
  - title: 'Documentation'
    labels:
      - 'documentation'
      - 'docs'
  - title: 'Maintenance'
    labels:
      - 'chore'
      - 'dependencies'
change-template: '- $TITLE @$AUTHOR (#$NUMBER)'
change-title-escapes: '\<*_&'
version-resolver:
  major:
    labels:
      - 'major'
      - 'breaking'
  minor:
    labels:
      - 'minor'
      - 'feature'
  patch:
    labels:
      - 'patch'
      - 'fix'
  default: patch
template: |
  ## Changes

  $CHANGES

  ## Contributors

  $CONTRIBUTORS
```
</task>

## Verification

```powershell
# Verify tag exists locally
git tag -l "v2.0.0"

# Verify tag on remote
git ls-remote --tags origin | Select-String "v2.0.0"

# Verify release exists on GitHub
gh release view v2.0.0

# Verify release is latest
gh release list --limit 1

# Verify CHANGELOG.md exists and has v2.0.0 entry
Get-Content CHANGELOG.md | Select-String "\[2.0.0\]"

# Open release in browser
gh release view v2.0.0 --web
```

## must_haves

These criteria must be TRUE for the plan to be considered complete:

1. CHANGELOG.md exists with v2.0.0 entry in Keep a Changelog format
2. CHANGELOG includes all major features from Phases 6-13
3. Git tag v2.0.0 created with annotated message
4. Tag pushed to remote repository
5. GitHub Release created with title "v2.0.0: Simulator Control Platform"
6. Release notes include highlights, breaking changes, and upgrade guide
7. Release marked as "Latest" on GitHub
8. No temporary files left uncommitted
