---
phase: 14-comprehensive-api-driven-integration-testing
plan: 09
type: execute
wave: 5
depends_on: ["14-08"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Full test suite runs without build errors"
    - "100% pass rate achieved for all enabled tests"
    - "JUnit XML report generated with correct test counts"
    - "Skipped tests have clear skip messages explaining requirements"
  artifacts: []
  key_links: []
---

<objective>
Human verification: Run complete integration test suite and verify 100% pass rate.

Purpose: Validate that all integration tests pass when running against the deployed simulator. Ensure the test suite is production-ready for CI/CD integration.

Output: Verified 100% test pass rate with human confirmation.
</objective>

<execution_context>
@C:\Users\UserC\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\UserC\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete FileSimulator.IntegrationTests project with:
- 50+ integration tests covering all protocols
- Static protocol tests (FTP, SFTP, HTTP, WebDAV, S3, SMB, NFS)
- Dynamic server lifecycle tests (FTP, SFTP, NAS)
- Cross-protocol file visibility tests
- Kafka integration tests (topics, produce/consume)
- Multi-NAS server tests (7 servers)
- Connection info API validation tests
- JUnit XML export for CI/CD
- PowerShell test runner script
  </what-built>
  <how-to-verify>
**Prerequisites:**
1. File simulator must be deployed and running
2. If testing SMB: run `minikube tunnel -p file-simulator` in Administrator terminal

**Run the full test suite:**
```powershell
# From repository root
.\scripts\Run-IntegrationTests.ps1
```

**Expected output:**
- All tests compile and run
- Passed tests show green
- Skipped tests (SMB without tunnel, NFS without mount) show yellow with clear skip messages
- Failed tests show red (should be 0)

**Verify JUnit XML:**
```powershell
# Check JUnit XML was generated
Get-Content .\test-results\junit-integration-tests.xml | Select-Object -First 20
```

**Verify test coverage categories:**
1. Static protocols: FTP, SFTP, HTTP, WebDAV, S3 should all pass
2. SMB: Passes with tunnel, skips gracefully without
3. NFS: TCP test passes, file ops pass if mounted
4. Dynamic servers: FTP, SFTP, NAS lifecycle tests pass
5. Cross-protocol: File visibility tests pass
6. Kafka: Topic management and produce/consume pass
7. Multi-NAS: All 7 servers TCP reachable
8. Connection info: All credentials valid

**Check for orphaned resources after tests:**
```powershell
kubectl --context=file-simulator get pods -n file-simulator | Select-String "test-"
# Should return nothing (no orphaned test servers)
```

**Review summary:**
- Total tests: Should be 50+
- Passed: Should match total (minus expected skips)
- Failed: Should be 0
- Skipped: Only for platform-specific tests (SMB tunnel, NFS mount)
  </how-to-verify>
  <resume-signal>
Type "approved" when:
- Full test suite runs without errors
- 100% pass rate achieved (excluding expected skips)
- JUnit XML generated correctly
- No orphaned test resources

Or describe any issues found.
  </resume-signal>
</task>

</tasks>

<verification>
Human verification of complete test suite execution.
</verification>

<success_criteria>
- Full test suite executes without build or runtime errors
- 100% pass rate for all enabled tests
- Expected skips have clear messages (SMB tunnel, NFS mount)
- JUnit XML report generated with accurate test counts
- No orphaned dynamic servers or test files after completion
- Human approval received
</success_criteria>

<output>
After completion, create `.planning/phases/14-comprehensive-api-driven-integration-testing/14-09-SUMMARY.md`
</output>
