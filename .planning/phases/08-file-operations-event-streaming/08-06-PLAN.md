---
phase: 08-file-operations-event-streaming
plan: 06
type: execute
wave: 3
depends_on: ["08-01", "08-02", "08-04", "08-05"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User verified file browser displays directory tree"
    - "User verified upload via drag-and-drop works"
    - "User verified download saves file locally"
    - "User verified delete with confirmation dialog works"
    - "User verified file events appear in real-time feed"
    - "User verified protocol badges show correct visibility"
---

<objective>
Human verification of all Phase 8 file operations and event streaming functionality.

Purpose: Ensure all file operations work correctly from a user perspective before marking phase complete.

Output: User approval of all six success criteria from ROADMAP.md
</objective>

<execution_context>
@C:\Users\UserC\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\UserC\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/08-file-operations-event-streaming/08-01-SUMMARY.md
@.planning/phases/08-file-operations-event-streaming/08-02-SUMMARY.md
@.planning/phases/08-file-operations-event-streaming/08-04-SUMMARY.md
@.planning/phases/08-file-operations-event-streaming/08-05-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Deploy updated backend to Minikube</name>
  <files></files>
  <action>
Build and deploy the updated Control API with file operations:

```powershell
# Build the Docker image
cd src/FileSimulator.ControlApi
docker build -t file-simulator-control-api:latest .

# Load into Minikube
minikube image load file-simulator-control-api:latest --profile=file-simulator

# Restart the deployment to pick up new image
kubectl --context=file-simulator rollout restart deployment/file-sim-file-simulator-control-api -n file-simulator

# Wait for rollout
kubectl --context=file-simulator rollout status deployment/file-sim-file-simulator-control-api -n file-simulator

# Check logs to verify FileWatcher started
kubectl --context=file-simulator logs -l app.kubernetes.io/name=control-api -n file-simulator --tail=50
```

Verify in logs:
- "FileWatcher started monitoring /mnt/simulator-data" (or similar)
- "FileEvents hub available at /hubs/fileevents"
  </action>
  <verify>
Backend deployed and FileWatcher running:
```powershell
kubectl --context=file-simulator get pods -n file-simulator | findstr control-api
# Should show 1/1 Running
```
  </verify>
  <done>Control API deployed with FileWatcher and file endpoints active.</done>
</task>

<task type="auto">
  <name>Task 2: Build and serve dashboard</name>
  <files></files>
  <action>
Build and run the dashboard locally:

```powershell
cd src/dashboard

# Install any new dependencies
npm install

# Build production bundle (verify no errors)
npm run build

# Start dev server for testing
npm run dev
```

Dashboard should be accessible at http://localhost:5173
  </action>
  <verify>
Dashboard runs without errors:
```powershell
# Should show "VITE vX.X.X ready" message
# Browser at http://localhost:5173 should show dashboard
```
  </verify>
  <done>Dashboard running locally with Files tab visible.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete file operations and event streaming system:
1. Backend FileWatcher monitoring C:\simulator-data
2. File API endpoints (browse, upload, download, delete)
3. SignalR file events hub
4. React file browser with tree view
5. Drag-and-drop file uploader
6. Real-time file event feed
7. Protocol visibility badges
  </what-built>
  <how-to-verify>
**Preparation:**
1. Ensure Minikube file-simulator profile is running
2. Ensure C:\simulator-data directory exists with some test files
3. Open http://localhost:5173 in browser

**Test 1: File Browser Display**
1. Click "Files" tab in dashboard
2. Verify file tree shows directories from C:\simulator-data
3. Verify directories are collapsible (click to expand)
4. Verify files show name, size, and modified date
5. Verify protocol badges appear on files/folders

**Test 2: File Upload**
1. Drag a test file onto the dropzone area
2. Verify upload progress shows
3. Verify file appears in the tree after refresh
4. Alternatively: Click dropzone to open file picker, select file

**Test 3: File Download**
1. Click download button (arrow icon) on any file
2. Verify browser downloads the file
3. Verify downloaded file content matches original

**Test 4: File Delete**
1. Click delete button (trash icon) on a test file
2. Verify confirmation dialog appears
3. Click OK to confirm
4. Verify file disappears from tree

**Test 5: Real-Time Events**
1. Open C:\simulator-data in Windows Explorer
2. Create a new text file
3. Verify "Created" event appears in File Activity sidebar within 1 second
4. Modify the file
5. Verify "Modified" event appears
6. Delete the file
7. Verify "Deleted" event appears

**Test 6: Protocol Visibility**
1. Create file in C:\simulator-data\nas-input-1\
2. Verify file shows "NAS" badge
3. Create file in C:\simulator-data\input\
4. Verify file shows multiple badges (FTP, SFTP, HTTP, S3, SMB, NFS)

**Expected Results:**
- All six ROADMAP success criteria are met
- No JavaScript console errors
- UI is responsive and styled consistently
  </how-to-verify>
  <resume-signal>
Type "approved" if all tests pass.
If issues found, describe what failed and we'll create fix plans.
  </resume-signal>
</task>

</tasks>

<verification>
Phase 8 ROADMAP.md success criteria:
1. [_] User can browse Windows C:\simulator-data directory hierarchy through dashboard UI
2. [_] User can upload files via browser to any protocol server and file appears in Windows directory
3. [_] User can download files from any protocol server through browser
4. [_] User can delete files across all protocols from dashboard with confirmation dialog
5. [_] File event feed shows real-time arrivals/departures when files created/modified/deleted in Windows
6. [_] Multi-protocol tracking shows which servers can see each file
</verification>

<success_criteria>
User confirms all six success criteria pass during human verification.
</success_criteria>

<output>
After approval, create `.planning/phases/08-file-operations-event-streaming/08-06-SUMMARY.md`
Then phase is complete.
</output>
